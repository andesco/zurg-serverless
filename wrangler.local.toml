# Personal development and production configuration
# Use this for your own deployments: wrangler deploy --config wrangler.local.toml

account_id = "0a15c5f9d39350baa992ff9f48efc1c8"
name = "zurg-serverless-dev"
main = "src/worker.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Development environment (default) - runs locally with wrangler dev
[vars]
BASE_URL = "http://localhost:8787"
REFRESH_INTERVAL_SECONDS = "5"
API_TIMEOUT_SECONDS = "15"
TORRENTS_PAGE_SIZE = "50"
HIDE_BROKEN_TORRENTS = "false"
WORKER_NAME = "zurg-serverless-dev"

# Your development database (local development uses local DB)
[[d1_databases]]
binding = "DB"
database_name = "zurg-serverless-dev-db"
database_id = "c123b8ff-c4ba-4c6b-8878-e8f035026b8d"

# Production environment - deploy with: wrangler deploy --config wrangler.local.toml --env production
[env.production]
name = "zurg-serverless"

# Custom domain configuration
routes = [
  { pattern = "serverless.andrewe.link", custom_domain = true }
]

# Production cron triggers
[env.production.triggers]
crons = ["0 */1 * * *"]  # Every hour

[env.production.vars]
BASE_URL = "https://serverless.andrewe.link"
REFRESH_INTERVAL_SECONDS = "15"
API_TIMEOUT_SECONDS = "30"
TORRENTS_PAGE_SIZE = "1000"
HIDE_BROKEN_TORRENTS = "true"
WORKER_NAME = "zurg-serverless"

[[env.production.d1_databases]]
binding = "DB"
database_name = "zurg-serverless-private"
database_id = "af42ed0a-06bc-47e5-81a1-8c078e4286d7"
